<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>è©³ç´°ãƒ»è§£èª­ãƒ¢ãƒ¼ãƒ‰</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 100vh; width: 100%; background: #f0f0f0; }
        .controls { position: absolute; top: 10px; right: 10px; z-index: 1000; background: white; padding: 10px; border-radius: 5px; display: flex; flex-direction: column; gap: 5px; }
        .back-btn { position: absolute; top: 10px; left: 10px; z-index: 1000; background: #333; color: white; padding: 10px; text-decoration: none; border-radius: 5px; }
        .map-label { font-weight: bold; font-size: 24px; white-space: nowrap; }
    #info-panel {				
        position: absolute;				
        bottom: 20px;				
        right: 10px;				
        z-index: 1000;				
        background: white;				
        padding: 15px;				
        border-radius: 8px;				
        box-shadow: 0 0 10px rgba(0,0,0,0.2);				
        width: 250px;				
        display: none; /* æœ€åˆã¯éš ã—ã¦ãŠã */				

    </style>
</head>
<body>

<a href="index.html" class="back-btn">â† å…¨ä½“ã«æˆ»ã‚‹</a>

<div class="controls">
    <button onclick="changeMode(1)">1. å…ƒã®åœ°å›³ï¼ˆæ‹¡å¤§ç‰ˆï¼‰</button>
    <button onclick="changeMode(2)">2. è§£èª­åœ°å›³ï¼ˆæ‹¡å¤§ç‰ˆï¼‰</button>
    <button onclick="changeMode(3)">3. è§£æçµæœã¨èª¬æ˜ï¼ˆå­—ã®å‘ãçµ±ä¸€ï¼‰</button>
</div>
<div id="map"></div>

<div id="info-panel">							
    <div class="panel-title">ğŸ’¡ è§£èª­ã®è±†çŸ¥è­˜</div>							
    <p style="margin: 0; font-size: 14px;">							
        éƒ¨å±‹åãªã©ã«ã€Œå¾¡ï¼ˆãŠã‚“ãƒ»ã”ï¼‰ã€ãŒã¤ã„ã¦ã„ã‚‹ã“ã¨ãŒå¤šãã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯æ¥é ­è¾ï¼ˆä¸å¯§ã«ã™ã‚‹è¨€è‘‰ï¼‰ãŒã¤ã„ãŸã‚‚ã®ã§ã€å½“æ™‚ã®æ•¬æ„ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚							
    </p>							
</div>		

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    const map = L.map('map', { crs: L.CRS.Simple, minZoom: -1 });
    const bounds = [[0, 0], [1000, 1000]];

    // â‘  å…ƒã®åœ°å›³ã€æ‹¡å¤§ç‰ˆã€‘
    const layerOriginal = L.imageOverlay('okattemukai.big.jpg', bounds);
    // â‘¡ è§£èª­åœ°å›³ã€æ‹¡å¤§ç‰ˆã€‘
    const layerKaidoku = L.imageOverlay('okattemukai.ni.png', bounds);

    // æœ€åˆã¯ã€Œå…ƒã®åœ°å›³ã€ã‚’è¡¨ç¤º
    layerOriginal.addTo(map);
    map.fitBounds(bounds);
    //
    map.setMaxBounds(bounds);
    // â‘¢ èª¬æ˜ç”¨ã®æ–‡å­—ãƒ‡ãƒ¼ã‚¿
    const annotations = [
        { text: "å¾¡å‹æ‰‹å‘ã€‡å€™å¤æœ¨å°å±‹", latlng: [136,314], rotation:0 , size:15,vertical:false,desc: "ã€å‹æ‰‹å‘ã€‘å°æ‰€ã€‚" },
        { text: "äºŒé–“ä¸ƒé–“", latlng: [837,538], rotation:0 , size:15,vertical:false,desc: "ã€äºŒé–“Ã—ä¸ƒé–“ã€‘ç´„3,636ï½Ã—ç´„12.726ï½" }

            ];//[ä¸‹â†’ä¸Š,å·¦â†’å³]

    const markers = L.layerGroup(); // æ–‡å­—ã‚’ã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—

    annotations.forEach(data => {
    // ç¸¦æ›¸ãã‹æ¨ªæ›¸ãã‹ã‚’åˆ¤å®šã™ã‚‹å‘½ä»¤									
    const writingMode = data.vertical ? 'vertical-rl' : 'horizontal-tb';									
    									
    const myIcon = L.divIcon({								
        className: 'map-label',									
        html: `<div style="									
            transform: rotate(${data.rotation}deg); 									
            font-size: ${data.size || 24}px; 									
            writing-mode: ${writingMode};									
            color: red;">${data.text}</div>`									
    });									
    									
    const marker = L.marker(data.latlng, { icon: myIcon });									
    marker.bindPopup(`<b>${data.text}</b><br>${data.desc}`);									
    markers.addLayer(marker);									
});									

    // åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
    function changeMode(mode) {
        // ä¸€æ—¦å…¨éƒ¨æ¶ˆã™
        map.removeLayer(layerOriginal);
        map.removeLayer(layerKaidoku);
        map.removeLayer(markers);

    // ä¸€æ—¦ãƒ‘ãƒãƒ«ã‚’éš ã™
    document.getElementById('info-panel').style.display = 'none';

    if (mode === 1) {
        layerOriginal.addTo(map);
    } else if (mode === 2) {
        layerKaidoku.addTo(map);
    } else if (mode === 3) {
        layerOriginal.addTo(map);
        markers.addTo(map);
        // ã€Œ3ã€ã®ã¨ãã ã‘ãƒ‘ãƒãƒ«ã‚’è¡¨ç¤ºã™ã‚‹
        document.getElementById('info-panel').style.display = 'block';
}

        if (mode === 1) {
            layerOriginal.addTo(map);
        } else if (mode === 2) {
            layerKaidoku.addTo(map);
        } else if (mode === 3) {
            layerOriginal.addTo(map); // èƒŒæ™¯ã¯å…ƒã®åœ°å›³
            markers.addTo(map);      // ãã®ä¸Šã«æ–‡å­—ã‚’è¡¨ç¤º
        }
    }

</script>
</body>
</html>
