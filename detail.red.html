<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>è©³ç´°ãƒ»è§£èª­ãƒ¢ãƒ¼ãƒ‰</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 100vh; width: 100%; background: #f0f0f0; }
        .controls { position: absolute; top: 10px; right: 10px; z-index: 1000; background: white; padding: 10px; border-radius: 5px; display: flex; flex-direction: column; gap: 5px; }
        .back-btn { position: absolute; top: 10px; left: 10px; z-index: 1000; background: #333; color: white; padding: 10px; text-decoration: none; border-radius: 5px; }
        .map-label { font-weight: bold; font-size: 24px; white-space: nowrap; }
    #info-panel {				
        position: absolute;				
        bottom: 20px;				
        right: 10px;				
        z-index: 1000;				
        background: white;				
        padding: 15px;				
        border-radius: 8px;				
        box-shadow: 0 0 10px rgba(0,0,0,0.2);				
        width: 250px;				
        display: none; /* æœ€åˆã¯éš ã—ã¦ãŠã */				

    </style>
</head>
<body>

<a href="index.html" class="back-btn">â† å…¨ä½“ã«æˆ»ã‚‹</a>

<div class="controls">
    <button onclick="changeMode(1)">1. å…ƒã®åœ°å›³ï¼ˆæ‹¡å¤§ç‰ˆï¼‰</button>
    <button onclick="changeMode(2)">2. è§£èª­åœ°å›³ï¼ˆæ‹¡å¤§ç‰ˆï¼‰</button>
    <button onclick="changeMode(3)">3. è§£æçµæœã¨èª¬æ˜ï¼ˆå­—ã®å‘ãçµ±ä¸€ï¼‰</button>
</div>
<div id="map"></div>

<div id="info-panel">							
    <div class="panel-title">ğŸ’¡ è§£èª­ã®è±†çŸ¥è­˜</div>							
    <p style="margin: 0; font-size: 14px;">							
        éƒ¨å±‹åãªã©ã«ã€Œå¾¡ï¼ˆãŠã‚“ãƒ»ã”ï¼‰ã€ãŒã¤ã„ã¦ã„ã‚‹ã“ã¨ãŒå¤šãã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯æ¥é ­è¾ï¼ˆä¸å¯§ã«ã™ã‚‹è¨€è‘‰ï¼‰ãŒã¤ã„ãŸã‚‚ã®ã§ã€å½“æ™‚ã®æ•¬æ„ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚							
    </p>							
</div>		

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    const map = L.map('map', { crs: L.CRS.Simple, minZoom: -1 });
    const bounds = [[0, 0], [1000, 1000]];

    // â‘  å…ƒã®åœ°å›³ã€æ‹¡å¤§ç‰ˆã€‘
    const layerOriginal = L.imageOverlay('furoya.big.jpg', bounds);
    // â‘¡ è§£èª­åœ°å›³ã€æ‹¡å¤§ç‰ˆã€‘
    const layerKaidoku = L.imageOverlay('furoya.ni.png', bounds);

    // æœ€åˆã¯ã€Œå…ƒã®åœ°å›³ã€ã‚’è¡¨ç¤º
    layerOriginal.addTo(map);
    map.fitBounds(bounds);
    //
    map.setMaxBounds(bounds);
    // â‘¢ èª¬æ˜ç”¨ã®æ–‡å­—ãƒ‡ãƒ¼ã‚¿
    const annotations = [
        { text: "å¾¡åºŠ", latlng: [933,660], rotation:0 , size:13,vertical:true,desc: "å¯ã‚‹ãŸã‚ã«è¨­ã‘ã‚‹ã¨ã“ã‚ã€‚ã­ã©ã“ã€‚"},
        { text: "å››å°ºå››å¯¸å»»ã‚Š", latlng: [668,474], rotation:50, size:12,vertical:true,desc: "4å°º4å¯¸=ç´„" },
        { text: "ãƒŠãƒ©ãƒã‚­", latlng: [432,586], rotation:0 , size:12,vertical:true,desc: "ã€æ¥¢ã€‘ãƒ‰ãƒ³ã‚°ãƒªã®ãªã‚‹ãƒ–ãƒŠç§‘ã®è½è‘‰é«˜æœ¨ã€‚ã—ã„ãŸã‘æ ½åŸ¹ã®åŸæœ¨ã‚„è–ªç‚­ç”¨ã«ç”¨ã„ã‚‰ã‚Œã‚‹ã€‚" },
        { text: "å…­åå…­é–“", latlng: [777,230], rotation:-15, size:12,vertical:true,desc: "66é–“=ç´„111.32ï½" },
        { text: "è—¤è¦‹æ«“", latlng: [804,40], rotation:0 , size:15,vertical:true,desc: "ã€å¯Œå£«è¦‹æ«“ã€‘æœ¬å¤šæ­£ç´”ãŒåŸã®æ”¹ä¿®ã‚’è¡Œã£ãŸéš›ã«å»ºã¦ã‚‰ã‚ŒãŸäºŒé‡äºŒéšã®æ«“ã€‚åœŸå¡å—è¥¿éƒ¨ã«ã‚ã‚Šã€åºƒã•ã¯ä¸‰é–“ï¼ˆç´„5.454ï½ï¼‰Ã—å››é–“ï¼ˆç´„7.272ï½ï¼‰ã€‚ã€€" },
        { text: "ï¼Ÿï¼Ÿï¼Ÿç›®é€šï¼Ÿã‚Šå…­å°ºå»»ã‚Š", latlng: [604,541], rotation:45 , size:12,vertical:true,desc: "é€šâ†’ç„¡ä¸é€šè¦‹" },//ã‚Šâ†’ã‚Šã‹ã‚‰å€™
        { text: "ãƒï¼Ÿãƒ„ï¼Ÿ", latlng: [523,414], rotation:0 , size:11,vertical:true,desc: "ã€æ¾ã€‘ãƒãƒ„ç§‘ã®é‡è‘‰æ¨¹ã€‚å¤šãã¯é«˜æœ¨ã§ã€é›Œé›„åŒæ ªã§ã‚ã‚‹ã€‚å¤æ¥ï¼Œæ—¥æœ¬ã§ã¯ç¥ã®ã‚ˆã‚‹ç¥è–ãªæœ¨ï¼Œç¯€æ“ãƒ»é•·å¯¿ã‚’è±¡å¾´ã™ã‚‹æœ¨ã¨å°Šã°ã‚Œã¦ã„ã‚‹ã€‚" },

        { text: "å¾¡å»Šä¸‹", latlng: [760,559], rotation:-15 , size:12,vertical:false,desc: "å®¶ã®ä¸­ã®éƒ¨å±‹ã‚’ã¤ãªãç´°é•·ã„é€šè·¯ã€‚" },
        { text: "å¾¡ç¸å´", latlng: [804,688], rotation:-17 , size:13,vertical:false,desc: "å®¶ã®åº§æ•·ã®å¤–å´ã«è¨­ã‘ãŸï¼Œç´°é•·ã„æ¿æ•·ãã®éƒ¨åˆ†ã€‚ãˆã‚“ã€‚"},  
        { text: "å¾¡ä¸Šæ®µ", latlng: [910,729], rotation:-17 , size:14,vertical:false,desc: "åºŠã‚’ä»–ã®éƒ¨å±‹ã‚ˆã‚Šä¸€æ®µé«˜ãã—ãŸéƒ¨å±‹ã€‚åºŠã®é–“ãƒ»é•ã„æ£šãƒ»ä»˜ã‘æ›¸é™¢ãŒè¨­ã‘ã‚‰ã‚Œã€é«˜è²´ãªäººã®åº§æ‰€ã¨ã•ã‚ŒãŸã€‚" },
        { text: "å¾¡æ¬¡é–“", latlng: [927,826], rotation:-22 , size:14,vertical:false,desc: "ã€å¾¡æ¬¡ã®é–“ã€‘ä¸»ãªåº§æ•·ã®éš£ã«ã¤ã„ã¦ã„ã‚‹å°éƒ¨å±‹ã€‚" },
        { text: "ä¸‰é–“", latlng: [860,39], rotation:-11 , size:10,vertical:false,desc: "ä¸‰é–“ï¼ç´„7.272ï½ï¼ˆå¯Œå£«è¦‹æ«“ã®åºƒã•ã‚’è¡¨ã—ã¦ã„ã‚‹ã€‚ï¼‰" },
        { text: "ãƒ¢ãƒŸ", latlng: [416,330], rotation:0 , size:10,vertical:false,desc: "ã€æ¨…ã€‘ãƒãƒ„ç§‘ã®å¸¸ç·‘é«˜æœ¨ã€‚é›Œé›„åŒæ ªã€‚åº­æœ¨ã‚„ã‚¯ãƒªã‚¹ãƒã‚¹ãƒ„ãƒªãƒ¼ã«åˆ©ç”¨" },
        { text: "ç«¹é¢¨å‘‚å±‹ã€‡å€™å¤æœ¨å°å±‹", latlng: [850,364], rotation:-15 , size:11,vertical:false,desc: "ã€é¢¨å‘‚å±‹ã€‘æµ´å®¤ã€‚æµ´å ´ã€‚" }

            ];//[ä¸‹â†’ä¸Š,å·¦â†’å³]

    const markers = L.layerGroup(); // æ–‡å­—ã‚’ã¾ã¨ã‚ã¦ç®¡ç†ã™ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—

    annotations.forEach(data => {
    // ç¸¦æ›¸ãã‹æ¨ªæ›¸ãã‹ã‚’åˆ¤å®šã™ã‚‹å‘½ä»¤									
    const writingMode = data.vertical ? 'vertical-rl' : 'horizontal-tb';									
    									
    const myIcon = L.divIcon({								
        className: 'map-label',									
        html: `<div style="									
            transform: rotate(${data.rotation}deg); 									
            font-size: ${data.size || 24}px; 									
            writing-mode: ${writingMode};									
            color: red;">${data.text}</div>`									
    });									
    									
    const marker = L.marker(data.latlng, { icon: myIcon });									
    marker.bindPopup(`<b>${data.text}</b><br>${data.desc}`);									
    markers.addLayer(marker);									
});									

    // åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
    function changeMode(mode) {
        // ä¸€æ—¦å…¨éƒ¨æ¶ˆã™
        map.removeLayer(layerOriginal);
        map.removeLayer(layerKaidoku);
        map.removeLayer(markers);

    // ä¸€æ—¦ãƒ‘ãƒãƒ«ã‚’éš ã™
    document.getElementById('info-panel').style.display = 'none';

    if (mode === 1) {
        layerOriginal.addTo(map);
    } else if (mode === 2) {
        layerKaidoku.addTo(map);
    } else if (mode === 3) {
        layerOriginal.addTo(map);
        markers.addTo(map);
        // ã€Œ3ã€ã®ã¨ãã ã‘ãƒ‘ãƒãƒ«ã‚’è¡¨ç¤ºã™ã‚‹
        document.getElementById('info-panel').style.display = 'block';
}

        if (mode === 1) {
            layerOriginal.addTo(map);
        } else if (mode === 2) {
            layerKaidoku.addTo(map);
        } else if (mode === 3) {
            layerOriginal.addTo(map); // èƒŒæ™¯ã¯å…ƒã®åœ°å›³
            markers.addTo(map);      // ãã®ä¸Šã«æ–‡å­—ã‚’è¡¨ç¤º
        }
    }

</script>
</body>
</html>
